<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>프롬프트 엔지니어링 핵심 정리</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=JetBrains+Mono:wght@400;500&family=Bebas+Neue&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- 배경 플로팅 셰이프 -->
<div class="background-shapes">
  <div class="shape shape-1"></div>
  <div class="shape shape-2"></div>
  <div class="shape shape-3"></div>
</div>

<div class="header">
  <div class="header-top">
    <h1>프롬프트 엔지니어링</h1>
    <span class="header-badge">핵심 정리</span>
  </div>
  <nav class="tabs">
    <a class="tab-btn active" href="index.html">목차</a>
    <a class="tab-btn" href="ch1.html"><span class="tab-num">1장</span>유형 &amp; 샷 기법</a>
    <a class="tab-btn" href="ch2.html"><span class="tab-num">2장</span>페르소나 패턴</a>
    <a class="tab-btn" href="ch3.html"><span class="tab-num">3장</span>마크다운 활용</a>
    <a class="tab-btn" href="ch4.html"><span class="tab-num">4장</span>표현 강도 &amp; 톤</a>
    <a class="tab-btn" href="ch5.html"><span class="tab-num">5장</span>대안 &amp; 이용자</a>
    <a class="tab-btn" href="ch6.html"><span class="tab-num">6장</span>레시피 &amp; 고급</a>
    <a class="tab-btn" href="ch7.html"><span class="tab-num">7장</span>품질 향상</a>
    <a class="tab-btn" href="ch8.html"><span class="tab-num">8장</span>구조화</a>
    <a class="tab-btn" href="ch9.html"><span class="tab-num">9장</span>비즈니스</a>
    <a class="tab-btn" href="ch10.html"><span class="tab-num">10장</span>자동화</a>
    <a class="tab-btn" href="ch11.html"><span class="tab-num">11장</span>인터랙티브</a>
  </nav>
</div>

<div class="content">

  <!-- ── 포털 검색 ──────────────────────────── -->
  <div class="search-hero">
    <div class="search-hero-title">어떤 작업이 필요하신가요?</div>
    <div class="search-hero-sub">검색어를 입력하면 AI가 최적의 프롬프트 기법을 찾아드립니다</div>
    <div class="search-bar-wrap">
      <span class="search-icon">🔍</span>
      <input type="text" id="search-input" class="search-input"
        placeholder="예: 사진 편집하기, 이메일 작성, 공부 자료 정리..." />
      <button class="search-btn" id="search-btn" onclick="doSearch()">검색</button>
    </div>
    <div class="search-examples">
      <span class="search-chip" onclick="fillSearch(this)">이메일 작성</span>
      <span class="search-chip" onclick="fillSearch(this)">SNS 콘텐츠</span>
      <span class="search-chip" onclick="fillSearch(this)">공부 자료 정리</span>
      <span class="search-chip" onclick="fillSearch(this)">사업 계획서</span>
      <span class="search-chip" onclick="fillSearch(this)">상품 소개글</span>
      <span class="search-chip" onclick="fillSearch(this)">영어 번역</span>
    </div>
    <div class="search-key-row">
      <label class="search-key-label">OpenAI API Key</label>
      <input type="password" id="search-key" class="search-key-input" placeholder="sk-...">
    </div>
  </div>

  <div id="search-error" class="search-error" style="display:none;"></div>
  <div id="search-results" class="search-results-wrap" style="display:none;"></div>

  <div class="chapter-header">
    <div class="chapter-tag">목차</div>
    <div class="chapter-title">ChatGPT · Gemini · Claude에<br>바로 쓰는 실전 프롬프트 가이드</div>
    <div class="chapter-desc">각 장의 프롬프트를 복사하여 AI 챗봇에 붙여넣고, [ ] 안의 내용만 바꾸면 바로 사용할 수 있습니다.</div>
  </div>

  <div class="toc-grid">
    <a class="toc-card" href="ch1.html">
      <div class="toc-num">01</div>
      <div class="toc-title">프롬프트 유형 &amp; 샷 기법</div>
      <div class="toc-desc">서술형·지침형·함수형 3가지 유형과 제로샷·원샷·퓨샷 기법. 구성 방식에 따라 AI 응답 품질이 달라진다.</div>
    </a>
    <a class="toc-card" href="ch2.html">
      <div class="toc-num">02</div>
      <div class="toc-title">페르소나 패턴</div>
      <div class="toc-desc">AI에게 역할을 부여하면 같은 질문에도 전혀 다른 답변이 생성된다. 단일·멀티 페르소나까지 다룬다.</div>
    </a>
    <a class="toc-card" href="ch3.html">
      <div class="toc-num">03</div>
      <div class="toc-title">마크다운 활용법</div>
      <div class="toc-desc">#헤더, 코드블럭, 인용문 등 마크다운 6가지 요소를 프롬프트에 적용하여 AI 파싱 정확도를 높인다.</div>
    </a>
    <a class="toc-card" href="ch4.html">
      <div class="toc-num">04</div>
      <div class="toc-title">표현 강도 &amp; 톤 지정</div>
      <div class="toc-desc">단어 강도에 따라 AI 처리 깊이가 달라진다. 톤(말투)을 지정하면 같은 내용도 완전히 다른 문체로 생성된다.</div>
    </a>
    <a class="toc-card" href="ch5.html">
      <div class="toc-num">05</div>
      <div class="toc-title">대안 접근법 &amp; 이용자 페르소나</div>
      <div class="toc-desc">모든 선택지를 비교하는 대안 패턴과, 답변을 듣는 사람의 프로필을 명시하는 이용자 페르소나 패턴.</div>
    </a>
    <a class="toc-card" href="ch6.html">
      <div class="toc-num">06</div>
      <div class="toc-title">레시피 · 뒤집힌 상호작용 · 인지 검증자</div>
      <div class="toc-desc">단계별 지침을 받는 레시피, AI가 먼저 질문하는 뒤집힌 상호작용, 복잡한 문제를 분해하는 인지 검증자.</div>
    </a>
    <a class="toc-card" href="ch7.html">
      <div class="toc-num">07</div>
      <div class="toc-title">품질 향상 패턴</div>
      <div class="toc-desc">질문 개선·팩트체크·리플렉션. AI 답변의 정확성과 완성도를 높이는 3가지 핵심 기법.</div>
    </a>
    <a class="toc-card" href="ch8.html">
      <div class="toc-num">08</div>
      <div class="toc-title">구조화 패턴</div>
      <div class="toc-desc">아웃라인 확장·컨텍스트 관리자·5W1H. 복잡한 내용을 체계적으로 정리하여 AI가 구조 있게 출력하게 만드는 기법.</div>
    </a>
    <a class="toc-card" href="ch9.html">
      <div class="toc-num">09</div>
      <div class="toc-title">비즈니스 프레임워크</div>
      <div class="toc-desc">CO-STAR·FOCUS·ROSES·RISEN·BAB. 제안서, 협상, 분쟁, 스토리텔링 등 실무 비즈니스 문서에 특화된 5가지 프레임워크.</div>
    </a>
    <a class="toc-card" href="ch10.html">
      <div class="toc-num">10</div>
      <div class="toc-title">자동화·생산성 패턴</div>
      <div class="toc-desc">메타언어 생성·무한 생성. 단축 명령어 설계와 변수 조합으로 반복 작업을 없애고 대량 결과물을 즉시 생성한다.</div>
    </a>
    <a class="toc-card" href="ch11.html">
      <div class="toc-num">11</div>
      <div class="toc-title">인터랙티브 패턴</div>
      <div class="toc-desc">게임플레이 패턴. AI를 텍스트 기반 게임 엔진으로 전환. 장르·주인공·규칙만 바꾸면 어드벤처부터 유아 동화까지 즉시 설계 가능.</div>
    </a>
  </div>

  <!-- ── AI 워크플로우 추천기 ──────────────── -->
  <div class="section" style="margin-top:48px;">
    <div class="section-title">AI 워크플로우 추천기</div>
    <div class="section-desc">하고 싶은 작업을 입력하면, 어떤 프롬프트 기법을 어떤 순서로 써야 하는지 알려드립니다</div>

    <div class="wf-box">
      <div class="wf-input-wrap">
        <textarea id="wf-goal" class="wf-goal" rows="2"
          placeholder="예: 소싱 품목 자동발굴 웹페이지 / 마케팅 콘텐츠 캘린더 / 계약서 법적 검토 자동화..."></textarea>
        <button class="wf-btn" onclick="getWorkflow()">
          <span id="wf-btn-text">추천받기 →</span>
        </button>
      </div>
      <div class="wf-key-row">
        <label class="wf-key-label">OpenAI API Key</label>
        <input type="password" id="wf-key" class="wf-key-input" placeholder="sk-...">
      </div>
    </div>

    <div id="wf-error" class="wf-error" style="display:none;"></div>
    <div id="wf-result" class="wf-result" style="display:none;"></div>
  </div>
</div>

<script>
/* ── 프롬프트 기법 데이터베이스 ─────────── */
const PROMPT_DB = [
  { chapter:'ch1', name:'1장 · 유형 & 샷 기법',
    sections:[
      { name:'지침형 프롬프트',
        tags:'보고서 분석 작성 마케팅 기획서 자료정리 업무문서 편집 요청 설명서 가이드 정리 문서작성',
        best_when:'명확한 규칙과 단계별 절차가 중요할 때',
        avoid_when:'창의적이고 자유로운 답변을 원할 때',
        triggers:['이 규칙 지켜서 해','순서대로 알려줘','가이드라인 줘','규칙 정해줄게'],
        situation_tags:'절차수립 규칙준수 가이드 단계별 정확성 지시 통제',
        output_type:'규칙을 준수한 단계별 결과물',
        template:'# 역할\n[전문가 역할 — 예: 10년차 마케터]\n# 지시\n[구체적인 지시 내용]\n# 형식\n[원하는 출력 형식 — 예: 표, 불릿, 3단락]' },
      { name:'서술형 프롬프트',
        tags:'정보검색 번역 요약 설명 뉴스 공부 학습 궁금증 질문 찾기',
        best_when:'상황과 배경을 자세히 설명해 이해시켜야 할 때',
        avoid_when:'정형화된 데이터 출력이 필요할 때',
        triggers:['상황 설명해줄게','이런 배경이 있어','이해하기 쉽게 말해줘','그냥 궁금해서'],
        situation_tags:'맥락이해 배경설명 유연한답변 초보자용 상황설명 친절한',
        output_type:'상황 맞춤형 설명문',
        template:'[자유로운 질문이나 요청을 자연어로 작성. 예: ~에 대해 쉽게 설명해줘]' },
      { name:'함수형 프롬프트',
        tags:'데이터변환 분류 편집 자동화 코드변환 형식정리 사진설명 이미지분류 파일변환 정리',
        best_when:'일정한 입출력 형식을 유지하며 토큰을 아낄 때',
        avoid_when:'자연스러운 대화가 필요할 때',
        triggers:['형식 맞춰서 출력해','JSON으로 줘','입력 처리 출력 구분해','같은 형식으로 변환해'],
        situation_tags:'정형데이터 데이터처리 효율성 전문적 일관성 자동화연동',
        output_type:'구조화된 데이터',
        template:'입력: [데이터 또는 텍스트]\n→ 출력: [변환 결과 형식]\n\n예시:\n입력: [샘플 입력]\n→ 출력: [샘플 출력]\n\n이제 적용해줘.' },
      { name:'퓨샷 기법',
        tags:'반복작업 형식통일 패턴 일관성유지 샘플기반 스타일통일 대량',
        best_when:'여러 예시로 정밀한 패턴과 논리를 학습시킬 때',
        avoid_when:'예시 없이도 AI가 잘 아는 일반적 주제일 때',
        triggers:['몇 가지 예시 줄게','이런 식으로 반복해','샘플 보여줄테니 따라해','패턴 학습시켜줄게'],
        situation_tags:'패턴매칭 정밀도향상 논리적추론 고난도작업 학습 데이터분류',
        output_type:'복수의 예시 패턴이 적용된 결과물',
        template:'예시1: [입력] → [출력]\n예시2: [입력] → [출력]\n예시3: [입력] → [출력]\n\n이제 같은 방식으로: [실제 입력]' },
    ]
  },
  { chapter:'ch2', name:'2장 · 페르소나 패턴',
    sections:[
      { name:'단일 페르소나',
        tags:'전문가상담 법률 의료 세무 컨설팅 코칭 멘토링 디자이너 편집자 작가 전문의견 조언',
        best_when:'특정 전문가의 관점과 말투가 필요할 때',
        avoid_when:'중립적인 사실 나열만 원할 때',
        triggers:['너는 전문가야','누구처럼 말해줘','직업을 가져봐','~입장에서 얘기해줘'],
        situation_tags:'역할부여 전문가관점 말투지정 태도 설정 전문성 관점전환',
        output_type:'특정 인격이 작성한 듯한 답변',
        template:'당신은 [역할 — 예: 15년차 사진작가]입니다.\n[경력·배경 — 예: 상업 광고 촬영 전문]을 가지고 있으며,\n[전문 분야]에 특화되어 있습니다.\n[말투·태도 — 예: 친절하고 실용적인 조언]로 응답해주세요.\n\n질문: [내용]' },
      { name:'멀티 페르소나',
        tags:'의사결정 다각도분석 팀토론 검토 브레인스토밍 다양한관점 비교검토',
        best_when:'다양한 전문가들의 입장을 동시에 듣고 싶을 때',
        avoid_when:'단 하나의 결론만 빠르게 필요할 때',
        triggers:['여러 명의 입장에서 말해줘','토론해봐','다각도로 분석해','여러 관점 보여줘'],
        situation_tags:'다각도분석 집단지성 찬반토론 의사결정 시뮬레이션 종합의견',
        output_type:'다수 전문가의 관점별 분석 리포트',
        template:'아래 세 전문가의 시각으로 각각 답변해주세요.\n\n전문가A: [역할 — 예: 디자이너]\n전문가B: [역할 — 예: 마케터]\n전문가C: [역할 — 예: 기술 개발자]\n\n주제: [내용]' },
    ]
  },
  { chapter:'ch3', name:'3장 · 마크다운 활용법',
    sections:[
      { name:'마크다운 구조화',
        tags:'문서정리 자료정리 코드 가독성 구조화 목차 리포트 공부정리 노트정리 정리 레이아웃 표',
        best_when:'AI 답변의 구조와 가독성을 높이고 싶을 때',
        avoid_when:'간단한 한두 줄 답변이 필요할 때',
        triggers:['정리해서 보여줘','표로 만들어줘','목차 있게 써줘','깔끔하게 구조화해줘'],
        situation_tags:'문서구조 가독성 표 목차 정리 코드블록 보고서 레이아웃',
        output_type:'헤더·표·코드블록이 포함된 구조화된 문서',
        template:'# 역할\n[전문가 역할]\n\n# 작업\n[수행할 작업]\n\n"""\n[입력 데이터 또는 정리할 내용]\n"""\n\n# 제약 조건\n> [절대 지켜야 할 조건]\n\n# 출력 형식\n[원하는 출력 형식 — 예: ## 소제목 + 불릿 목록]' },
    ]
  },
  { chapter:'ch4', name:'4장 · 표현 강도 & 톤',
    sections:[
      { name:'표현 강도 조절',
        tags:'조건설정 우선순위 필수조건 제약사항 규칙설정 엄격 강조 중요',
        best_when:'중요도에 따라 조건의 우선순위를 명확히 해야 할 때',
        avoid_when:'모든 조건이 동등하게 중요한 단순 작업',
        triggers:['이건 반드시 해줘','필수 조건이 있어','이것만은 지켜줘','우선순위 정해서 해'],
        situation_tags:'우선순위 필수조건 제약 규칙 강조 조건설정 엄격',
        output_type:'우선순위 단계별 조건이 반영된 결과물',
        template:'🔴 최우선 (절대조건) : [가장 중요한 조건]\n🟡 중요 (일반조건)   : [일반 조건]\n🟢 선택 (권장조건)   : [선호 조건]\n\n위 조건을 지켜서 [작업 내용]을 작성해주세요.' },
      { name:'톤 지정',
        tags:'문체 말투 친근한 전문적 유머 공식적 편지 SNS 콘텐츠 블로그 카피 광고 따뜻한 차가운',
        best_when:'글의 말투와 분위기를 독자에 맞게 제어하고 싶을 때',
        avoid_when:'감정·분위기보다 정확한 정보 전달이 우선인 기술문서',
        triggers:['친근하게 써줘','전문적으로 써줘','캐주얼하게 해줘','말투 바꿔줘'],
        situation_tags:'말투 문체 스타일 친근한 전문적 SNS 광고 공식적 감성',
        output_type:'지정 톤이 일관되게 반영된 텍스트',
        template:'[톤/스타일 — 예: 친근하고 유머러스한] 스타일로 [작업 내용]을 작성해주세요.\n\n대상 독자: [독자 설명]\n분량: [분량]' },
    ]
  },
  { chapter:'ch5', name:'5장 · 대안 & 이용자',
    sections:[
      { name:'대안 접근법',
        tags:'비교 추천 선택 쇼핑 구매결정 상품비교 방법비교 앱비교 서비스비교 뭐가나을까 어떤게좋을까',
        best_when:'하나의 정답 대신 모든 해결책을 비교하고 싶을 때',
        avoid_when:'고민 없이 단일 정답만 원할 때',
        triggers:['다른 방법은 없어?','비교해줘','장단점 알려줘','어떤 게 나을까'],
        situation_tags:'문제해결 대안제시 장단점비교 선택권넓히기 리스크분석 역발상',
        output_type:'장단점이 포함된 대안 목록표',
        template:'아래 각 상황에 맞는 가장 적합한 [추천 대상]을 추천해주세요.\n각 상황은 서로 독립적으로 판단해주세요.\n\n상황 A : [상황 설명]\n상황 B : [상황 설명]\n상황 C : [상황 설명]\n\n각 상황에 대해:\n1순위 추천 : [항목] - [이유 한 줄]\n2순위 추천 : [항목] - [이유 한 줄]' },
      { name:'이용자 페르소나',
        tags:'맞춤설명 초보자 전문가 어린이 노인 교육 강의자료 맞춤형 쉬운설명 친절한',
        best_when:'답변을 듣는 사람의 수준에 맞게 최적화할 때',
        avoid_when:'범용적인 정보 제공이 목적일 때',
        triggers:['누구한테 설명할 거야','애들도 알게 말해줘','초보자용이야','이 사람 수준에 맞게'],
        situation_tags:'타겟맞춤 독자배려 수준조절 교육 가독성 맞춤형설명',
        output_type:'대상자 수준에 최적화된 설명',
        template:'대상: [독자 프로필 — 예: 사진 입문자, 30대, 스마트폰만 사용]\n목적: [이 사람이 원하는 것]\n\n이 사람 수준에 맞게 [내용]을 설명해주세요.' },
    ]
  },
  { chapter:'ch6', name:'6장 · 레시피 & 고급',
    sections:[
      { name:'레시피 패턴',
        tags:'계획수립 단계별 프로젝트 학습계획 실행계획 로드맵 다이어트 운동 공부계획 어떻게하면 순서',
        best_when:'구체적인 실행 순서와 체크리스트가 필요할 때',
        avoid_when:'이론적인 개념 설명만 원할 때',
        triggers:['어떻게 시작해?','단계별로 알려줘','할 일 목록 줘','어떻게 해야 해'],
        situation_tags:'실행지침 행동계획 가이드라인 프로젝트관리 순서도 체크리스트',
        output_type:'단계별 행동 지침 및 완료 기준',
        template:'# 목표\n[달성하고 싶은 목표]\n\n# 현재 상태\n- [현재 보유한 것 / 상황]\n- [현재 부족한 것 / 제약]\n\n# 요청\n위의 목표를 달성하기 위한 단계별 레시피를 작성해주세요.\n\n## STEP {번호} : {단계명}\n- 할 일     : {구체적 행동}\n- 완료 기준 : {다음 단계로 넘어갈 기준}' },
      { name:'뒤집힌 상호작용',
        tags:'인터뷰 요구사항수집 맞춤제작 상담 복잡한작업 개인화 맞춤형콘텐츠 정보수집',
        best_when:'정보 부족을 막기 위해 AI가 먼저 질문하게 할 때',
        avoid_when:'내가 모든 정보를 이미 알고 있을 때',
        triggers:['필요한 거 물어봐','네가 질문해줘','답변 다 듣고 해줘','물어보고 만들어줘'],
        situation_tags:'정보수집 역질문 정밀도향상 컨설팅 인터뷰 누락방지',
        output_type:'최종 결과물을 위한 질문 목록',
        template:'제가 원하는 결과물은 [목표]입니다.\n바로 만들지 말고, 먼저 아래 항목들을 질문해서 제 답변을 모두 수집한 후 작성해주세요.\n\n수집이 필요한 정보:\n- [항목 1]\n- [항목 2]\n- [항목 3]' },
      { name:'인지 검증자',
        tags:'복잡한문제 논리분석 의사결정 전략수립 심층분석 어려운문제 왜 원인파악',
        best_when:'복잡한 문제를 하위 질문으로 나눠 검증할 때',
        avoid_when:'직관적인 답변이 필요할 때',
        triggers:['바로 답하지 마','나눠서 생각해봐','하나씩 검증해','먼저 분석해봐'],
        situation_tags:'논리검증 복잡한문제 사고분해 정확성향상 단계적추론 신뢰도',
        output_type:'하위 질문 검증을 거친 최종 판단',
        template:'아래 질문에 바로 답하지 말고,\n먼저 이 질문을 정확히 답하기 위한 하위 질문 3~5개를 도출해주세요.\n각 하위 질문에 순서대로 답한 뒤, 최종 통합 답변을 제시해주세요.\n\n질문: [복잡한 질문]' },
    ]
  },
  { chapter:'ch7', name:'7장 · 품질 향상',
    sections:[
      { name:'질문 개선 패턴',
        tags:'프롬프트개선 질문개선 최적화 더좋은답변 잘물어보기 업그레이드',
        best_when:'내 질문이 모호해 더 좋은 질문으로 바꾸고 싶을 때',
        avoid_when:'질문이 이미 충분히 구체적일 때',
        triggers:['질문 다듬어줘','더 잘 물어보는 법','내 의도 알겠어?','더 좋게 써줘'],
        situation_tags:'질문품질 개선 의도명확화 맥락오류교정 업그레이드 정확성',
        output_type:'개선된 질문과 그 이유 및 답변',
        template:'내 원래 질문: [원래 질문]\n\n이 질문을 더 구체적이고 효과적으로 개선해주세요.\n그런 다음 개선된 질문으로 바로 답변해주세요.' },
      { name:'팩트체크 패턴',
        tags:'사실확인 검증 팩트체크 오류방지 정확성 신뢰성 검토 확인',
        best_when:'틀리면 안 되는 중요 정보의 신뢰성을 확인할 때',
        avoid_when:'창의적인 글쓰기나 주관적 의견 시',
        triggers:['진짜 맞아?','확인할 거 알려줘','팩트체크해줘','이거 틀린 거 있어?'],
        situation_tags:'정보검증 환각방지 신뢰도점수 위험요소 법규세율 출처확인',
        output_type:'신뢰도 등급이 표시된 검증 목록',
        template:'아래 내용에서 사실 여부가 불확실하거나 검증이 필요한 항목을 모두 찾아\n체크리스트 형식으로 정리해주세요.\n\n검증 대상:\n[텍스트 또는 주장]' },
      { name:'리플렉션 패턴',
        tags:'품질개선 자기검토 완성도 퇴고 개선 정확성향상 다시쓰기 수정',
        best_when:'AI가 스스로 초안을 비평하고 고도화하게 할 때',
        avoid_when:'빠른 속도가 생명인 실시간 대화',
        triggers:['다시 검토해봐','비판적으로 봐줘','고쳐서 다시 써','스스로 평가해봐'],
        situation_tags:'자기성찰 품질고도화 퇴고 비평 개선 논리완결성',
        output_type:'비평을 거쳐 개선된 최종 완성본',
        template:'[작업 내용]을 수행해주세요.\n\n작성 후, 스스로 아래 기준으로 비판해주세요:\n- 빠뜨린 내용은?\n- 부정확한 부분은?\n- 더 개선할 점은?\n\n비판을 반영해 최종 개선 버전을 다시 작성해주세요.' },
    ]
  },
  { chapter:'ch8', name:'8장 · 구조화',
    sections:[
      { name:'아웃라인 확장',
        tags:'글쓰기 보고서 논문 기사 긴글 블로그 콘텐츠작성 에세이 확장 늘리기',
        best_when:'방대한 내용을 뼈대부터 세부 단위까지 확장할 때',
        avoid_when:'짧고 단편적인 답변이 필요할 때',
        triggers:['목차부터 짜줘','세부 내용 늘려줘','구조 잡아줘','개요 만들어줘'],
        situation_tags:'구조화 목차작성 내용확장 대형프로젝트 기획 집필 체계적',
        output_type:'단계별로 확장된 상세 아웃라인',
        template:'아래 개요를 바탕으로 완성된 [문서 종류 — 예: 블로그 포스트]를 작성해주세요.\n\n개요:\n1. [섹션 1]\n2. [섹션 2]\n3. [섹션 3]\n\n조건: [분량, 톤 등]' },
      { name:'컨텍스트 관리자',
        tags:'긴대화 맥락유지 프로젝트관리 연속작업 이어서 지속 기억',
        best_when:'대화 내내 특정 상황과 제약을 고정하고 싶을 때',
        avoid_when:'매번 다른 맥락의 질문을 던질 때',
        triggers:['상황은 이래','이 조건 기억해','환경 설정해줄게','계속 이 맥락에서 해'],
        situation_tags:'맥락고정 조건설정 대화흐름제어 제약사항 배경지식 세팅',
        output_type:'고정된 맥락 안에서의 일관된 답변',
        template:'지금까지의 대화 핵심을 아래 형식으로 요약해주세요:\n\n- 주제: [핵심 주제]\n- 결정 사항: [합의된 내용]\n- 미해결 사항: [아직 남은 것]\n\n요약 후 [다음 작업]을 이어서 진행해주세요.' },
      { name:'5W1H',
        tags:'취재 기획 이벤트계획 뉴스 보도자료 체계적분석 인터뷰 정리 완전한정보',
        best_when:'육하원칙으로 누락 없는 완벽한 전략을 짤 때',
        avoid_when:'가벼운 일상 대화나 잡담 시',
        triggers:['전략 보고서 써줘','누가 언제 어디서 해?','계획 짜줘','빠진 거 없게 분석해'],
        situation_tags:'육하원칙 전략수립 보고서 기획서 누락방지 종합분석',
        output_type:'6개 변수가 반영된 전략 문서',
        template:'아래 주제에 대해 5W1H로 완전히 분석해주세요.\n\n주제: [주제]\n\n- 누가(Who):\n- 언제(When):\n- 어디서(Where):\n- 무엇을(What):\n- 왜(Why):\n- 어떻게(How):' },
    ]
  },
  { chapter:'ch9', name:'9장 · 비즈니스',
    sections:[
      { name:'CO-STAR 프레임워크',
        tags:'제안서 비즈니스문서 발표자료 영업 피칭 IR 투자유치 프레젠테이션 ppt',
        best_when:'바이어를 설득하는 공식 제안서나 서한용',
        avoid_when:'내부용 메모나 간단한 확인 이메일',
        triggers:['제안서 써줘','바이어 설득해야 해','공식 메일 써줘','프레젠테이션 만들어줘'],
        situation_tags:'설득 문서 제안서 비즈니스 목적중심 독자맞춤 격식',
        output_type:'목적과 독자에 최적화된 비즈니스 제안서',
        template:'[Context]  배경: [현재 상황·맥락]\n[Objective] 목표: [달성하고자 하는 것]\n[Style]    스타일: [글쓰기 스타일]\n[Tone]     톤: [말투·분위기]\n[Audience] 독자: [대상 독자]\n[Response] 형식: [원하는 출력 형식]' },
      { name:'FOCUS 프레임워크',
        tags:'전략기획 기획안 마케팅전략 사업계획 전략문서 계획서 방향설정',
        best_when:'짧고 강렬한 마케팅 메시지나 카피가 필요할 때',
        avoid_when:'긴 호흡의 논문이나 기술 문서',
        triggers:['메시지 작성해줘','홍보 문구 필요해','답장률 높여줘','임팩트 있게 써줘'],
        situation_tags:'아웃리치 메시지작성 마케팅 카피라이팅 짧고강렬한 타겟팅',
        output_type:'다양한 버전의 임팩트 있는 메시지',
        template:'[Frame]       프레임: [관점·렌즈 설정]\n[Objective]   목표: [핵심 목표]\n[Constraints] 제약: [조건·한계]\n[User]        사용자: [대상]\n[Style]       스타일: [표현 방식]' },
      { name:'BAB 스토리텔링',
        tags:'협상 설득 스토리텔링 갈등해결 세일즈 카피라이팅 광고 전후비교 변화',
        best_when:'성공 사례를 통해 고객의 마음을 움직이고 싶을 때',
        avoid_when:'수치만 나열하는 기술 보고서',
        triggers:['성공 스토리 써줘','우리 장점 알려줘','사례 홍보해줘','감동적으로 써줘'],
        situation_tags:'스토리텔링 성공사례 공감유도 비포애프터 브랜딩 홍보',
        output_type:'서사 구조가 있는 마케팅 스토리',
        template:'[Before] 현재 문제: [고객·독자가 겪고 있는 상황]\n[After]  목표 상태: [이 제품·방법을 쓰면 어떻게 달라지는가]\n[Bridge] 해결책: [Before → After를 연결하는 방법을 제안해주세요]' },
    ]
  },
  { chapter:'ch10', name:'10장 · 자동화',
    sections:[
      { name:'메타언어 생성',
        tags:'자동화 단축명령 반복작업 생산성 업무자동화 효율화 빠르게 명령어 설정',
        best_when:'전용 명령어로 반복 작업을 즉시 실행할 때',
        avoid_when:'일회성 단순 질문 시',
        triggers:['명령어 만들어줘','단축키 설정해줘','매번 설명하기 귀찮아','자동화하고 싶어'],
        situation_tags:'자동화 생산성 단축명령 반복작업 효율화 나만의코드 커스텀',
        output_type:'명령어 사전 및 실행 가이드',
        template:'아래 단축 명령어 체계를 설계해주세요.\n\n/[명령어1] = [실행할 작업1]\n/[명령어2] = [실행할 작업2]\n\n설계 후, /[명령어]로 [첫 번째 작업]을 실행해주세요.' },
      { name:'무한 생성 패턴',
        tags:'대량생성 콘텐츠제작 SNS게시물 광고카피 상품설명 아이디어뱅크 썸네일 여러개 많이',
        best_when:'변수만 바꿔 동일 형식 결과물을 대량 생성할 때',
        avoid_when:'매번 형식이 달라야 할 때',
        triggers:['이메일 여러 개 써줘','상품평 대량 생성해줘','조합 바꿔가며 만들어줘','많이 만들어줘'],
        situation_tags:'대량생성 무한반복 템플릿 변수조합 자동화 마케팅 데이터',
        output_type:'변수 기반 결과물 목록',
        template:'아래 변수를 조합하여 [결과물 종류] [N]개를 생성해주세요.\n\n변수1 [항목명]: [옵션A / 옵션B / 옵션C]\n변수2 [항목명]: [옵션A / 옵션B]\n\n출력 형식: [형식]' },
    ]
  },
  { chapter:'ch11', name:'11장 · 인터랙티브',
    sections:[
      { name:'게임플레이 패턴',
        tags:'게임 롤플레이 교육게임 동화 스토리 어드벤처 시뮬레이션 학습게임 놀이 재미',
        best_when:'상호작용하며 시나리오를 진행하고 싶을 때',
        avoid_when:'빠른 정보 전달이 우선일 때',
        triggers:['게임 시작하자','너는 진행자야','선택지 줘','같이 이야기 만들어줘'],
        situation_tags:'인터랙티브 역할극 게임 엔진 시나리오 몰입 체험 상호작용',
        output_type:'상태창과 선택지가 포함된 게임 장면',
        template:'당신은 텍스트 기반 [장르 — 예: 어드벤처] 게임 마스터입니다.\n\n설정:\n- 주인공: [캐릭터 설명]\n- 배경: [세계관·장소]\n- 규칙: [게임 규칙 2~3가지]\n\n매 턴마다 상황을 묘사하고 선택지 3개를 제시하세요.\n지금 게임을 시작해주세요.' },
    ]
  },
];

/* ── 검색 함수 ───────────────────────────── */
function fillSearch(chip) {
  document.getElementById('search-input').value = chip.textContent;
  doSearch();
}

function showSearchError(msg) {
  const el = document.getElementById('search-error');
  el.textContent = '⚠ ' + msg;
  el.style.display = 'block';
}

async function doSearch() {
  const query  = document.getElementById('search-input').value.trim();
  const keyEl  = document.getElementById('search-key');
  const key    = keyEl.value.trim() || localStorage.getItem('oai-key');
  const errEl  = document.getElementById('search-error');
  const resEl  = document.getElementById('search-results');
  const btn    = document.getElementById('search-btn');

  errEl.style.display = 'none';
  resEl.style.display = 'none';

  if (!query) { showSearchError('검색어를 입력해주세요.'); return; }
  if (!key)   { showSearchError('OpenAI API Key를 입력해주세요.'); return; }

  localStorage.setItem('oai-key', key);
  // wf-key 동기화
  const wfKey = document.getElementById('wf-key');
  if (wfKey && !wfKey.value) wfKey.value = key;

  btn.disabled = true;
  btn.textContent = '검색 중...';

  const sys = `당신은 프롬프트 엔지니어링 기법 검색 시스템입니다.
아래 데이터베이스에서 사용자의 작업에 가장 적합한 기법을 3~4개 추천하세요.

데이터베이스:
${JSON.stringify(PROMPT_DB)}

매칭 우선순위 (순서대로 적용):
1. triggers: 사용자 입력과 의미가 유사한 트리거 문장이 있으면 최우선 선택
2. situation_tags: 사용자의 상황·의도·목적과 일치하는 태그
3. best_when: 사용자 작업이 이 설명에 부합하는지 확인
4. avoid_when: 해당 조건에 맞는 기법은 반드시 제외

반드시 아래 JSON 형식으로만 반환하세요:
{"results":[{"chapter":"ch1","chapterName":"1장 · 유형 & 샷 기법","section":"지침형 프롬프트","reason":"이 기법이 맞는 이유 (25자 이내)","prompt":"완성된 프롬프트"}]}

prompt 작성 규칙 (가장 중요):
- 해당 section의 template 구조를 그대로 유지하되, [ ] 안의 플레이스홀더를 사용자 작업에 맞는 구체적인 내용으로 완전히 채울 것
- 예: 지침형이면 # 역할 / # 지시 / # 형식 구조 유지, 레시피면 # 목표 / # 현재 상태 / # 요청 구조 유지
- [ ] 플레이스홀더를 그대로 남기지 말고 반드시 사용자 검색어에 맞는 실제 내용으로 채울 것
- 바로 ChatGPT/Claude에 붙여넣어 사용 가능한 완성 프롬프트로 작성`;

  try {
    const res = await fetch('https://api.openai.com/v1/chat/completions', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${key}` },
      body: JSON.stringify({
        model: 'gpt-4o-mini',
        messages: [
          { role: 'system', content: sys },
          { role: 'user', content: `작업: ${query}` }
        ],
        response_format: { type: 'json_object' },
        temperature: 0.3
      })
    });

    if (!res.ok) {
      const err = await res.json().catch(() => ({}));
      throw new Error(err.error?.message || `API 오류 (${res.status})`);
    }

    const data   = await res.json();
    const parsed = JSON.parse(data.choices[0].message.content);
    renderSearchResults(parsed, query);

  } catch (e) {
    showSearchError(e.message);
  } finally {
    btn.disabled = false;
    btn.textContent = '검색';
  }
}

function highlightPlaceholders(raw) {
  return raw
    .replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')
    .replace(/(\[[^\]]+\])/g, '<span class="placeholder-token">$1</span>');
}

function renderSearchResults(data, query) {
  const el = document.getElementById('search-results');

  const cardsHtml = data.results.map(r => {
    const promptHtml = highlightPlaceholders(r.prompt || '');
    return `
      <div class="search-result-card">
        <div class="search-result-top">
          <span class="search-result-chapter-badge">${r.chapterName || r.chapter}</span>
          <span class="search-result-section">${r.section}</span>
        </div>
        <div class="search-result-reason">${r.reason}</div>
        <div class="search-result-prompt-wrap">
          <div class="search-result-prompt-label">
            바로 쓰는 프롬프트
            <span class="prompt-edit-hint">· 직접 수정 가능</span>
          </div>
          <div class="search-result-prompt-text" contenteditable="true" spellcheck="false"
            oninput="toggleResetBtn(this)"
          >${promptHtml}</div>
          <div class="prompt-action-row">
            <button class="search-reset-btn" style="display:none" onclick="resetPrompt(this)">↩ 되돌리기</button>
            <button class="search-copy-prompt-btn" onclick="copySearchPrompt(this)">복사</button>
          </div>
        </div>
        <a class="search-go-btn" href="${r.chapter}.html">${r.chapterName || r.chapter} 자세히 보기 →</a>
      </div>`;
  }).join('');

  el.innerHTML = `
    <div class="search-results-header">
      "<em>${query}</em>" 검색 결과 &nbsp;·&nbsp; ${data.results.length}개 기법 추천
    </div>
    ${cardsHtml}`;
  el.style.display = 'block';

  // 원본 텍스트 저장 (plain text 기준)
  el.querySelectorAll('.search-result-prompt-wrap').forEach(wrap => {
    const div = wrap.querySelector('.search-result-prompt-text');
    wrap.dataset.original = div.innerText;
  });

  el.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function toggleResetBtn(div) {
  const wrap = div.closest('.search-result-prompt-wrap');
  const btn  = wrap.querySelector('.search-reset-btn');
  btn.style.display = (div.innerText !== wrap.dataset.original) ? 'inline-block' : 'none';
}

function resetPrompt(btn) {
  const wrap = btn.closest('.search-result-prompt-wrap');
  const div  = wrap.querySelector('.search-result-prompt-text');
  div.innerHTML = highlightPlaceholders(wrap.dataset.original);
  btn.style.display = 'none';
  div.focus();
}

function copySearchPrompt(btn) {
  const div  = btn.closest('.search-result-prompt-wrap').querySelector('.search-result-prompt-text');
  const text = div.innerText;
  navigator.clipboard.writeText(text).then(() => {
    btn.textContent = '✓ 복사됨';
    btn.classList.add('copied');
    setTimeout(() => { btn.textContent = '복사'; btn.classList.remove('copied'); }, 2000);
  });
}

/* ── 모바일 사이드바 햄버거 버튼 ─────────── */
(function injectMobileNav() {
  const btn = document.createElement('button');
  btn.className = 'menu-toggle';
  btn.setAttribute('aria-label', '메뉴');
  btn.innerHTML = '☰';

  const overlay = document.createElement('div');
  overlay.className = 'sidebar-overlay';

  document.body.prepend(overlay);
  document.body.prepend(btn);

  const sidebar = document.querySelector('.header');
  btn.addEventListener('click', () => {
    const isOpen = sidebar.classList.toggle('sidebar-open');
    overlay.classList.toggle('active', isOpen);
    btn.innerHTML = isOpen ? '✕' : '☰';
  });
  overlay.addEventListener('click', () => {
    sidebar.classList.remove('sidebar-open');
    overlay.classList.remove('active');
    btn.innerHTML = '☰';
  });
  sidebar.querySelectorAll('.tab-btn').forEach(a => {
    a.addEventListener('click', () => {
      sidebar.classList.remove('sidebar-open');
      overlay.classList.remove('active');
      btn.innerHTML = '☰';
    });
  });
})();

const WF_LABELS = {
  ch1: '1장 · 유형 & 샷 기법',
  ch2: '2장 · 페르소나 패턴',
  ch3: '3장 · 마크다운 활용',
  ch4: '4장 · 표현 강도 & 톤',
  ch5: '5장 · 대안 & 이용자',
  ch6: '6장 · 레시피 & 고급'
};
const WF_COLORS = {
  ch1: 'badge-blue', ch2: 'badge-purple', ch3: 'badge-yellow',
  ch4: 'badge-green', ch5: 'badge-blue',  ch6: 'badge-purple'
};

window.addEventListener('DOMContentLoaded', () => {
  const saved = localStorage.getItem('oai-key');
  if (saved) {
    document.getElementById('wf-key').value    = saved;
    document.getElementById('search-key').value = saved;
  }

  document.getElementById('search-input').addEventListener('keydown', e => {
    if (e.key === 'Enter') { e.preventDefault(); doSearch(); }
  });

  document.getElementById('wf-goal').addEventListener('keydown', e => {
    if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); getWorkflow(); }
  });

  // 이전 워크플로우 복원
  const prevWf = sessionStorage.getItem('wf-data');
  if (prevWf) {
    try { renderWorkflow(JSON.parse(prevWf), true); } catch(e) {}
  }
});

async function getWorkflow() {
  const goal   = document.getElementById('wf-goal').value.trim();
  const keyEl  = document.getElementById('wf-key');
  const key    = keyEl.value.trim() || localStorage.getItem('oai-key');
  const errEl  = document.getElementById('wf-error');
  const resEl  = document.getElementById('wf-result');
  const btn    = document.querySelector('.wf-btn');
  const btnTxt = document.getElementById('wf-btn-text');

  errEl.style.display = 'none';
  resEl.style.display = 'none';

  if (!goal) { showWfError('작업 내용을 입력해주세요.'); return; }
  if (!key)  { showWfError('OpenAI API Key를 입력해주세요.'); return; }

  localStorage.setItem('oai-key', key);
  btn.disabled = true;
  btnTxt.textContent = '분석 중...';

  const sys = `당신은 프롬프트 엔지니어링 워크플로우 추천 시스템입니다.
사용자의 목표에 맞는 워크플로우를 추천하고, 각 단계의 hint는 반드시 아래 챕터별 양식 구조를 그대로 사용하여 작성하세요.

=== 챕터별 프롬프트 양식 ===

[ch1 - 지침형 프롬프트]
# 역할
[전문가 역할]
# 지시
[구체적인 지시 내용]
# 형식
[원하는 출력 형식]

[ch2 - 페르소나 패턴]
당신은 [역할]입니다.
[경력/배경]을 가지고 있으며,
[전문 분야]에 특화되어 있습니다.
[말투/태도]로 응답하세요.

[ch3 - 마크다운 구조화]
# 역할
[전문가 역할과 경력]

# 작업
[수행할 작업]

"""
[입력 데이터 또는 분석 대상]
"""

# 제약 조건
> [절대 조건]

# 출력 형식
[원하는 출력 형식]

[ch4 - 표현 강도 & 톤]
🔴 최우선 (절대조건) : [가장 중요한 조건]
🟡 중요 (일반조건)   : [일반 조건]
🟢 선택 (권장조건)   : [선호 조건]

[톤/스타일] 스타일로 [작업]을 해주세요.

[ch5 - 대안 접근법]
아래 각 상황에 맞는 가장 적합한 [추천 대상]을 추천하세요.
각 상황은 서로 독립적으로 판단하세요.

상황 A : [상황 설명]
상황 B : [상황 설명]
상황 C : [상황 설명]

각 상황에 대해:
1순위 추천 : [추천 항목] - [이유 한 줄]
2순위 추천 : [추천 항목] - [이유 한 줄]

[ch6 - 레시피 패턴]
# 목표
[달성하고 싶은 목표]

# 현재 상태
- [현재 보유한 것 / 상황]
- [현재 부족한 것 / 제약]

# 요청
위의 목표를 달성하기 위한 단계별 레시피를 작성하세요.

## STEP {번호} : {단계명}
- 할 일     : {구체적 행동}
- 완료 기준 : {다음 단계로 넘어갈 기준}

[ch6 - 역질문 패턴]
제가 원하는 결과물은 [목표]입니다.
바로 만들지 말고, 먼저 아래 항목들을 질문해서
제 답변을 모두 수집한 후 작성하세요.

수집이 필요한 정보:
- [항목 1]
- [항목 2]
- [항목 3]

[ch6 - 인지 검증자 패턴]
아래 질문에 바로 답하지 말고
먼저 이 질문을 정확히 답하기 위해 필요한 하위 질문을 3~5개 도출하세요.
각 하위 질문에 순서대로 답한 뒤 최종 통합 답변을 제시하세요.

질문: [복잡한 질문]

=== 출력 형식 ===
3~5단계 워크플로우를 아래 JSON 형식으로만 반환하세요:
{"summary":"추천 이유 한 줄 (30자 이내)","steps":[{"step":1,"title":"단계명 (8자 이내)","desc":"이 단계가 필요한 이유 (25자 이내)","chapter":"ch2","hint":"위의 해당 챕터 양식 구조를 그대로 사용하여 [ ] 안을 사용자 목표에 맞게 채운 완성 프롬프트"}]}

hint 작성 규칙:
- 반드시 해당 챕터의 양식 구조(#헤더, 들여쓰기, 이모지 등)를 그대로 유지
- [ ] 안의 플레이스홀더를 사용자 목표에 맞는 구체적 내용으로 채울 것
- 즉시 복사해서 ChatGPT/Claude에 붙여넣을 수 있는 완성된 프롬프트로 작성`;

  try {
    const res = await fetch('https://api.openai.com/v1/chat/completions', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${key}` },
      body: JSON.stringify({
        model: 'gpt-4o-mini',
        messages: [{ role: 'system', content: sys }, { role: 'user', content: `목표: ${goal}` }],
        response_format: { type: 'json_object' },
        temperature: 0.3
      })
    });

    if (!res.ok) {
      const err = await res.json().catch(() => ({}));
      throw new Error(err.error?.message || `API 오류 (${res.status})`);
    }

    const data   = await res.json();
    const parsed = JSON.parse(data.choices[0].message.content);
    renderWorkflow(parsed);

  } catch (e) {
    showWfError(e.message);
  } finally {
    btn.disabled = false;
    btnTxt.textContent = '추천받기 →';
  }
}

function showWfError(msg) {
  const el = document.getElementById('wf-error');
  el.textContent = '⚠ ' + msg;
  el.style.display = 'block';
}

function renderWorkflow(data, restored) {
  if (!restored) sessionStorage.setItem('wf-data', JSON.stringify(data));

  const stepsHtml = data.steps.map((s, i) => {
    const color = WF_COLORS[s.chapter] || 'badge-blue';
    const label = WF_LABELS[s.chapter]  || s.chapter;
    const arrow = i < data.steps.length - 1
      ? '<div class="wf-arrow">→</div>' : '';
    const hintHtml = s.hint
      ? `<div class="wf-hint-block">
           <div class="wf-hint-label">프롬프트 예시</div>
           <div class="wf-hint-text">${s.hint.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\n/g,'<br>')}</div>
           <button class="wf-hint-copy" onclick="copyHint(this)">복사</button>
         </div>` : '';
    return `
      <div class="wf-step">
        <div class="wf-step-num">STEP ${s.step}</div>
        <div class="wf-step-title">${s.title}</div>
        <div class="wf-step-desc">${s.desc}</div>
        ${hintHtml}
        <a class="badge ${color} wf-step-link" href="${s.chapter}.html">${label} →</a>
      </div>${arrow}`;
  }).join('');

  const el = document.getElementById('wf-result');
  el.innerHTML = `
    <div class="wf-summary">${data.summary}</div>
    <div class="wf-flow">${stepsHtml}</div>`;
  el.style.display = 'block';
  if (!restored) el.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function copyHint(btn) {
  const raw = btn.previousElementSibling.innerText;
  navigator.clipboard.writeText(raw).then(() => {
    btn.textContent = '✓ 복사됨';
    btn.classList.add('copied');
    setTimeout(() => { btn.textContent = '복사'; btn.classList.remove('copied'); }, 2000);
  });
}
</script>

</body>
</html>
